@page "{id:int}"
@using NETForum.Constants
@using NETForum.Pages.Shared.Components.ForumList
@using NETForum.Pages.Shared.Components.PostList

@model NETForum.Pages.Forums.DetailsModel

@{
    ViewData["Title"] = "Forum Details";
}

<div class="row mt-2">
    <div class="col">
        <div class="d-flex">
            <a asp-page="@PageRoutes.PostCreate" asp-route-forumId="@Model.ForumPageDto.Id" class="btn btn-secondary">Create Post</a>
        </div>
    </div>
</div>
<div class="row mt-2">
    <div class="col">
        @if (Model.ForumPageDto.Subforums.Count > 0)
        { 
            @await Component.InvokeAsync("ForumList", new ForumListOptions
            {
               ForumListTitle = "Subforums",
               ForumItems = Model.ForumPageDto.Subforums
            });
        }
    </div>
</div>
<div class="row mt-4">
    <div class="col">
        <div class="card">
            <div class="card-header shadow bg-primary text-white">
                Posts
            </div>
            <div class="card-body">
                @if (Model.ForumPageDto.Posts.Count > 0)
                {
                    @await Component.InvokeAsync("PostList", new PostListViewModel
                    {
                        Posts = Model.ForumPageDto.Posts
                    })
                }
                else
                {
                    <p>No posts to display.</p>
                }
            </div>
        </div>
    </div>
</div>